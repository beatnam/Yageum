<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
	<meta charset="UTF-8">
	<title>내역 상세보기</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Google Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link
		href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Nanum+Brush+Script&family=Black+Han+Sans&display=swap"
		rel="stylesheet">

	<link rel="stylesheet" href="../css/common.css">
	<link rel="stylesheet" href="../css/cashbook_detail.css">

</head>

<body>
	<!-- 헤더 -->
	<div th:replace="fragments/header :: header"></div>

	<!-- 사이드바 + 본문 -->
	<div class="app-container">
		<div th:replace="fragments/sidebar :: sidebar"></div>
		<main class="content">
			<div class="content-header">
				<h2>내역 상세보기</h2>
				<p>자세한 내역을 확인하세요!</p>
			</div>
			<div class="content-body">
				<div class="transaction-detail-box">
					<!-- 금액 및 아이콘 -->
					<div class="transaction-amount">
						<div class="transaction-icon">💰</div>
						<span class="amount income">+ 2,500,000</span>
					</div>

					<!-- 거래 정보 -->
					<table class="transaction-info">
						<tr>
							<td><strong>날짜</strong></td>
							<td class="right" id="transactionDate"></td>
						</tr>
						<tr>
							<td><strong>유형</strong></td>
							<td class="right">수입</td>
						</tr>
						<tr>
							<td><strong>내용</strong></td>
							<td class="right">아이티월 6월 월급</td>
						</tr>
						<tr>
							<td><strong>수단</strong></td>
							<td class="right">국민은행 계좌</td>
						</tr>
						<tr>
							<td><strong>카테고리</strong></td>
							<td class="right">월급 / 월급</td>
						</tr>
					</table>

					<!-- 메모 -->
					<div class="memo-section">
						<label for="memo">메모</label><br>
						<textarea id="memo" name="memo" rows="3">6월 월급</textarea>
					</div>

					<!-- 버튼 -->
					<div class="btn-section">
						<button type="button" class="btn-edit">수정하기</button>
					</div>
				</div>
			</div>
		</main>
	</div>

	<!--	푸터-->
	<div th:replace="fragments/footer :: footer"></div>

	<script>
		function getDateFromURL() {
				const params = new URLSearchParams(window.location.search);
				return params.get("date");
			}

		function formatDateToKorean(dateStr) {
			const [year, month, day] = dateStr.split("-");
			return `${year}년 ${parseInt(month)}월 ${parseInt(day)}일`;
			}

		document.addEventListener("DOMContentLoaded", function () {
					const dateStr = getDateFromURL();
					if (dateStr) {
						const koreanDate = formatDateToKorean(dateStr);
						const dateCell = document.getElementById("transactionDate");
						if (dateCell) {
							dateCell.textContent = koreanDate;
						}
					}
				});

		
		
		//수정하기 버튼 누르면 수정 페이지로 넘어감
		document.querySelector(".btn-edit").addEventListener("click", function () {
			const dateStr = getDateFromURL();
			window.location.href = `/cashbook/update?date=${dateStr}`;
		});
		
		


		function logout() {
			if (confirm('로그아웃 하시겠습니까?')) {
				window.location.href = '/logout';
			}
		}

		function previousDay() {
			// 이전 날짜로 이동하는 로직
			console.log('이전 날짜로 이동');
		}

		function nextDay() {
			// 다음 날짜로 이동하는 로직
			console.log('다음 날짜로 이동');
		}
	</script>
</body>

</html>