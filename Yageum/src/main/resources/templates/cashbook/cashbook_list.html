<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>일별 내역</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Nanum+Brush+Script&family=Black+Han+Sans&display=swap" rel="stylesheet">

 <link rel="stylesheet" href="../css/common.css">
 <link rel="stylesheet" href="../css/cashbook_list.css">

</head>
<body>
	<!-- 헤더 -->
		<div th:replace="fragments/header :: header"></div>

    <!-- 사이드바 + 본문 -->
    <div class="app-container">
       		<div th:replace="fragments/sidebar :: sidebar"></div>

            <main class="content">
            <div class="content-header">
                <h2>일별 수입 / 지출</h2>
                <p>오늘의 수입 / 지출 내역을 확인하세요!</p>
            </div>
            <div class="content-body">
                <div class="date-navigation">
                    <button class="date-nav-btn" onclick="previousDay()">◀</button>
                    <div class="current-date">
                        <span class="date-text" id="currentDate"><!--여기에 화면에서 누른 날짜 출력됨--></span>
                    </div>
                    <button class="date-nav-btn" onclick="nextDay()">▶</button>
                </div>

                <div class="transaction-list">
                    <!-- 수입 내역 -->
                    <div class="transaction-item">
                        <div class="transaction-icon">💰</div>
                        <div class="transaction-info">
                            <div class="transaction-name">아이템 6월 월급</div>
                            <div class="transaction-method">국민은행 계좌</div>
                        </div>
                        <div class="transaction-amount income">+ 2,560,000</div>
                    </div>

                    <!-- 지출 내역들 -->
                    <div class="transaction-item">
                        <div class="transaction-icon">🍴</div>
                        <div class="transaction-info">
                            <div class="transaction-name">밀양돼지국밥</div>
                            <div class="transaction-method">케이뱅크 체크카드</div>
                        </div>
                        <div class="transaction-amount expense">- 9,000</div>
                    </div>

                    <div class="transaction-item">
                        <div class="transaction-icon">🛒</div>
                        <div class="transaction-info">
                            <div class="transaction-name">다이소 서면중앙점</div>
                            <div class="transaction-method">현금</div>
                        </div>
                        <div class="transaction-amount expense">- 4,000</div>
                    </div>

                    <div class="transaction-item">
                        <div class="transaction-icon">☕</div>
                        <div class="transaction-info">
                            <div class="transaction-name">스타벅스 서면역점</div>
                            <div class="transaction-method">네이버삼성카드</div>
                        </div>
                        <div class="transaction-amount expense">- 12,000</div>
                    </div>
                </div>

                <!-- 일일 합계 -->
                <div class="daily-summary">
                    <div class="summary-row">
                        <span>수입: <span class="income">+ 2,560,000원</span></span>
                        <span>지출: <span class="expense">- 25,000원</span></span>
                        <span class="total">잔액: <span class="balance">+ 2,535,000원</span></span>
                    </div>
                </div>
				
				<div class="floating-label">가계부 추가</div>
				<a href="/cashbook/insert" class="floating-btn">+</a>
            </div>
        </main>
    </div>

	<!--	푸터-->
		<div th:replace="fragments/footer :: footer"></div>

    <script>
  
		//url에서 쿼리 파라미터 값 들고옴
		function getDateFromURL() {
	        const params = new URLSearchParams(window.location.search);
	        return params.get("date");
	    }

		//YYYY-MM-DD → "2025년 6월 15일"로 변환
	    function formatDateToKorean(dateStr) {
	        const [year, month, day] = dateStr.split("-");
	        return `${year}년 ${parseInt(month)}월 ${parseInt(day)}일`;
	    }

		//날짜 영역에 url에서 가지고 온 값을 날짜 형식으로 변환한대로 출력
	    document.addEventListener("DOMContentLoaded", function () {
	        const dateStr = getDateFromURL();
	        if (dateStr) {
	            const formatted = formatDateToKorean(dateStr);
	            document.getElementById("currentDate").textContent = formatted;
	        }
			
			document.querySelectorAll('.transaction-item').forEach(item => {
			    item.addEventListener('click', () => {
			        const dateStr = getDateFromURL();  // 현재 날짜 쿼리
			        // const transactionId = item.dataset.id;
			        // 예시: 날짜만 넘기기
			        window.location.href = `/cashbook/detail?date=${dateStr}`;
			    });
			});
			
	    });   
  
		
        function logout() {
            if(confirm('로그아웃 하시겠습니까?')) {
                window.location.href = '/logout';
            }
        }

            function previousDay() {
            // 이전 날짜로 이동하는 로직
            console.log('이전 날짜로 이동');
        }

        function nextDay() {
            // 다음 날짜로 이동하는 로직
            console.log('다음 날짜로 이동');
        }
    </script>
</body>
</html>